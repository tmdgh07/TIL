# 단위 테스트와 테스트 주도 개발

---

## 단위 테스트(Unit Test)란?

소프트웨어 개발에서 사용되는 테스트 방법으로, 소프트웨어의 가장 작은 단위인 모듈, 함수, 클래스, 메서드 등의 개별적인 단위를 분리해 테스트하는 테스트 방법입니다.

일반적으로 단위가 작을수록 복잡성이 낮아지고, 실행하려는 기능을 표현하기 쉬워지기 때문에 테스트는 가장 작은 단위를 사용해 독립적으로 진행됩니다.

### 장점

- 작성한 코드들을 수시로 빠르게 점검, 검증할 수 있다.
- 유지보수나 리팩토링시 안정성을 확보할 수 있다.
- 개발 및 테스팅에 대한 시간과 비용이 절감된다.

## 테스트 주도 개발(Test-Driven Development, TDD) 이란?

테스트 코드를 먼저 작성하는 개발 방법론으로, 먼저 개발하고 테스트를 하는 방식이 아닌 테스트 코드를 작성하고 그 테스트를 통과하기 위한 코드를 개발하는 방식을 말합니다.

### 사용하는 이유?

1. 깔끔한 코드 작성 가능
    
    TDD의 개발 단계중에는 리팩토링이라는 과정이 있는데, 리팩토링을 거치면서 중복된 코드들은 제거되고  복잡한 코드들은 깔끔하게 정리됩니다.
    
2. 개발자의 귀찮음
    
    개발이 모두 끝난 뒤 테스트 코드를 작성하게 된다면, 이미 개발이 완료되었다는 심리적인 요인과 성공, 실패 케이스를 모두 작성해야 한다는 점이 굉장히 귀찮을 것입니다.
    

### TDD 개발 방법, 순서

1. 테스트 케이스 작성
    
    만들고 싶은 기능을 테스트할 코드를 작성합니다. 아직은 기능이 구현되지 않았으므로, 결과는 당연히 실패로 반환되게됩니다. ( 이때, 실패하는 테스트를 빠르게 구현하려면 아무 값이나 반환하면 됩니다. )
    
    예시로 간단한 계산기 프로그램을 만들어 보겠습니다.
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled.png)
    
    덧셈 기능을 테스트하는 코드입니다.
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled%201.png)
    
    아직 CalculatorService클래스가 없기때문에 실패하는 것을 볼 수 있습니다.
    
2. 테스트를 통과하는 코드 작성
    
    테스트 코드를 통과할 수 있는 기능을 구현합니다. 테스트를 통과하는 것을 최우선으로 작업해야 하므로, 단위 테스트를 통과할 수 있을 정도의 최소한의 코드만 작성합니다.
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled%202.png)
    
    위와 같이 덧셈 기능을 구현한 후 다시 테스트를 해보면,
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled%203.png)
    
    성공하는 것을 확인할 수 있습니다.
    
3. 작성한 코드 리팩토링
    
    위에서 작성한 코드를 성능이 향상되고, 재사용성이 좋고 가독성이 좋은 코드로 개선합니다. 그 후, 테스트 코드를 통해 다시 기능 코드를 점검하며 기능 코드가 완전해 질때까지 이를 반복합니다.
    
    제 예제는 간단한 코드이기 때문에 추가적인 리팩토링이 필요가 없지만, 복잡한 코드라면 리팩토링이 필요할 수 있습니다.
    

1. 기능 추가
    
    위 1, 2, 3 단계를 다른 기능으로 반복합니다.
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled%204.png)
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled%205.png)
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled%206.png)
    
    ![Untitled](img/단위테스트와%20테스트주도개발/Untitled%207.png)
    
    저는 위와같이 뺄셈 기능을 추가적으로 구현했습니다.
    

### 장점

- 객체 지향적 코드 개발이 가능하다
    
    TDD는 코드의 재사용 보장을 명시하므로, TDD를 통해 소프트웨어를 개발할 시 기능별로 모듈화가 이루어집니다. 즉, 의존성과 종속성을 낮춰서 개발할 수 있으며 필요에 따라서 모듈을 추가하거나 제거하여도 전체 구조에는 영향을 끼치지 않게 됩니다.
    
- 유지보수가 용이하다
    
    기본적으로 단위 테스트 기반의 테스트 코드를 작성하기에 문제가 발생했을 때 각 모듈별로 테스트를 진행하다 보면 문제가 일어난 부분을 쉽게 찾을 수 있습니다.
    

### 단점

- 사전준비 기간이 길다.
    
    TDD를 프로젝트에 도입하려면 사전에 필요한 지식을 습득하고 개발 환경을 구축해야 하는데, TDD를 효과적으로 사용하려 공부한다면 대략 1~6개월 가량의 시간이 필요합니다.
    

### TDD Tool

전 세계 적으로 널리 사용되는 TDD툴로는 JUnit이 있다. JUnit은 Java의 표준 단위 테스트 프레임워크로, 독립된 단위 테스트를 지원해줍니다.