# Domain과 DDD

# Domain 이란?

```basic
비즈니스 문제가 발생하는 영역
```

예를 들면 Member Domain (회원 관리 도메인),  Order Domain (주문 관리 도메인 )등이 있을 수 있다.

## Domain 모델

```basic
도메인의 핵심 개념과 규칙을 객체로 표현한 것
```

도메인 자체를 표현하는 개념적인 모델을 의미하지만, 도메인 계층을 구현할 때 사용하는 객체 모델을 언급할 때에도 '도메인 모델'이란 용어를 사용한다.

### 특징

도메인 전문가들과 개발자들이 도메인을 공유하고 협력하여 도메인 모델을 구축하고 유지보수할 수 있도록 하는 것이 목표이다. 또한, 실제 비즈니스 동작을 잘 반영하고, 도메인의 복잡성을 최소화하면서도 효과적으로 도메인 로직을 구현해야 한다.

즉, 핵심 도메인과 기능에 집중하고, 도메인의 모델을 정교하게 구축해야한다.

# DDD(Domain Driven Design) 란?

```basic
도메인 주도 개발

복잡한 도메인을 이해하고 효과적으로 모델링하기 위해 사용되는 개발 방법
```

도메인에 집중하며 도메인의 복잡성을 최소화하기 위해 소프트웨어를 설계하고 개발하는 방법이다.

### 핵심 목표

- Loosly Coupling (결합도 최소화)
- High Cohesion (응집성 최대화 )

어플리케이션 또는 그 안의 모듈의 도메인은 서로 철저히 분리되고, 높은 응집력과 낮은 결합도로 변경과 확장에 용이한 설계를 얻게된다.

## Strategic Design ( 개념 설계 )

Strategic Design 은 전체 시스템의 복잡성을 줄이고 유지보수성을 높이는데 도움을 주며, 도메인 전문가와 개발자 간의 소통과 협력을 강화할 수 있다. 또, 비즈니스 용어와 개념들을 정확히 이해하고 모델링함으로써 시스템이 실제 비즈니스 요구사항을 잘 반영하게 된다.

## Tactical Design ( 전술적 설계 )

DDD 에서 Bounded Context 내부의 도메인 모델을 구축하는 단계

```basic
Bounded Context란?

도메인 모델을 적용할 범위를 한정하는 개념으로, 한 개 또는 여러 개의 도메인 모델로 구성된다.
Domain의 부분 집합인 SubDomain의 문맥적 상황을 나타내기도 한다.
```

큰 집단 (Domain) 한 개와, 그 안에 특징이 구별되는 여러 개의 집합 (SubDomain)이 서비스로 구현되는 설계 방식이다.

메인 모델의 구성요소들을 선택하고 연결하는 방법을 다루며, 주요 구성요소로는 Layered Architecture, Entity, Value, Aggregate, Domain Service, Repository 등이 있다.

## Layered Architecture

```basic
계층이 나눠져 있는 아키텍쳐

주된 목표는 각각의 layer가 하나의 관심사에만 집중할 수 있도록 하는 것이다.
```

![image.png](img/Domain과%20DDD/image.png)

대표적으로는 위와같은 계층 구조를 가진다.

### Presentation Layer (표현 계층) (Controlloer)

- 사용자 요청에 대해 해석, 응답한다.
- 사용자에게 UI를 제공하거나 클라이언트에 응답을 다시 보내는등의 역할을 하는 모든 클래스가 포함된다.

### Application Layer (응용 계층) (Service)

- 비즈니스 로직을 정의하고 정상적으로 수행되도록 도메인 계층과 인프라 계층을 연결해주는 역할을 한다.
- 많은 정보를 가지고 있지 않게 해야하며, 실질적인 데이터 처리는 도메인 계층에서 진행할 수 있도록 위임해야 한다.

### Domain Layer (도메인 계층) (Model)

- 비즈니스 규칙, 정보에 대한 실질적 도메인 정보를 가지고 있으며, 이 모든것을 책임지는 계층이다.
- Entity를 활용하여 도메인 로직이 실행되며, 업무 상황을 반영하여 상태를 제어한다.

### Infrastructure Layer (인프라 계층) (Repository)

- 외부와의 통신(DB, 메시징 시스템등)을 담당한다.
- 해당 계층에서 얻어온 정보를 응용계층 또는 도메인 계층에 전달한다.

### 장점

- 각 레이어가 느슨하게 결합된 형태로 구축하여, 각각 자신의 관심사에만 집중할 수 있다.
- 핵심 비즈니스 로직을 순수하게 유지하여, 유지보수 및 확장성에서 이득을 볼 수 있다.

### 단점

- 서비스가 커질수록 복잡도가 증가하여 확장성이 떨어진다.
- 레이어로 분리된 관심사 외의 다른 관심사가 생길 경우 패키지 분리 및 코드 배치가 어렵다.

### 나머지 구성 요소들

| 요소 | 개념 |
| --- | --- |
| Entity | - 고유 식별자, 생명주기를 가진다.<br>- 도메인의 고유한 개념을 표현한다. |
| Value | - 하나의 값을 표현할 때 사용한다.<br>- 다른 밸류 타입의 속성으로도 사용된다. |
| Aggregate | - 관련이 있는 엔티티, 밸류객체를 개념적으로 하나로 묶은 것 |
| Domain Service | - 특정 엔티티에 속하지 않은 도메인 로직을 제공한다.<br>- 도메인 로직이 여러 엔티티와 밸류를 필요로 한다면, 도메인 서비스에서 로직을 구현한다. |
| Repository | - 도메인 모델의 영속성을 처리한다.<br>- DB를 전담으로 처리한다. |